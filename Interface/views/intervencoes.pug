extends layout
block content
  .w3-card-4
    - let operation = null

    - for (const consulta of consultas) {
      - const foundOperation = consulta.operacoes.find(operacao => operacao.codigo === code)
      - if (foundOperation) {
        - operation = foundOperation
        - break
      - }
    - }
    header.w3-container.w3-teal
      h1 Utilizadores com Intervenção #{code}
    .w3-container
      h4 Código: #{operation.codigo}
      h4 Nome: #{operation.nome}
      h4 Descricao: #{operation.descricao}
      table.w3-table-all
        tr
          th Id
          th Data
          th Nome
          th Idade 
          th Sexo
          th Número de intervenções
        
        each consulta in consultas
          if consulta.operacoes.some(operacao => operacao.codigo === code)
            tr
              td #[a(href="/"+consulta._id) #{consulta._id}]
              td= consulta.data
              td= consulta.nome
              td= consulta.idade
              td= consulta.sexo
              td= consulta.nr_operacoes
              
    footer.w3-container.w3-teal
      h5 Generated by Joana Pereira - #[a(href="/") Return]